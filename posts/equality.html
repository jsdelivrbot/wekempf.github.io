
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Digital Tapestry - Equality</title>
        <meta name="description" content="Weaving a Digital Tapestry" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Digital Tapestry" href="/feed.rss" />
        <link type="application/atom+xml" rel="alternate" title="Digital Tapestry" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico?v=2" type="image/x-icon">
        <link rel="icon" href="/favicon.ico?v=2" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />
        <ling href="https://cdn.rawgit.com/knsv/mermaid/6.0.0/dist/mermaid.css" rel="stylesheet" type="text/css">


        <meta name="application-name" content="Digital Tapestry" />
        <meta name="msapplication-tooltip" content="Digital Tapestry" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Digital Tapestry - Equality" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://digitaltapestry.net/posts/equality" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>
        <script src="https://cdn.rawgit.com/knsv/mermaid/6.0.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->

                <style>
                        .intro-header *, .navbar:not(.is-fixed) * { color: #101F45 !important; }
                        hr { border-color: #101F45 !important; }
                        .btn { color: initial !important }
                </style>

        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Digital Tapestry</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/tags">All Tags</a></li>
        <li><a href="/posts">Archive</a></li>
        <li><a href="/resume">Resume</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header" style="background-image: url(&quot;/assets/images/banner_web.jpg&quot;)">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Equality</h1>
    <div class="meta">        
Published on Friday, September 1, 2017<br>    </div>
        <div class="tags">
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="equality">Equality</h1>
<p>Equality is such a simple concept at a high level, but don't fool yourself. The devil is in the details. Correctly
implementing equality is actually much harder than you'd think, and most code I've seen has done it wrong. There
are a lot of very subtle rules you should obey when implementing equality that are easy to forget or to implement
incorrectly.</p>
<p>Think I'm exagerating, or just plain wrong? Well, consider the number of tests there are in the <code>EquatableVerifier&lt;T&gt;</code>
in <code>Testify</code>.</p>
<div class="alert alert-info"><p><code>EquatableVerifier&lt;T&gt;</code> is a &ldquo;contract verifier&rdquo; provided in <a href="http://www.digitaltapestry.net/testify/">Testify</a>,
a unit testing helper framework I'm the author of. Contract verifiers provide a suite of tests for &quot;contracts&quot;
that a type should obey. <code>EquatableVerifier&lt;T&gt;</code> ensures a type obeys the contract for <code>IEquatable&lt;T&gt;</code>.</p>
</div>
<table class="table">
<thead>
<tr>
<th>Test</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VerifyObjectEqualsIsOverridden</td>
<td>Verifies that you've overridden the <code>Object.Equals</code> method.</td>
</tr>
<tr>
<td>VerifyObjectEqualsWithEqualItems</td>
<td>Verifies that <code>Object.Equals</code> returns true when the objects are supposed to be equal.</td>
</tr>
<tr>
<td>VerifyObjectEqualsWithNull</td>
<td>Verifies that <code>Object.Equals</code> returns false when the object passed to it is <code>null</code>.</td>
</tr>
<tr>
<td>VerifyGetHashCodeIsOverridden</td>
<td>Verifies that you've overridden the <code>Object.GetHashCode</code> method.</td>
</tr>
<tr>
<td>VerifyGetHashCodeIsStable</td>
<td>Verifies that <code>Object.GetHashCode</code> returns the same value when called more than once.</td>
</tr>
<tr>
<td>VerifyGetHashCodeWithEqualItems</td>
<td>Verifies that <code>Object.GetHashCode</code> returns the same value when the objects are supposed to be equal.</td>
</tr>
<tr>
<td>VerifyObjectEqualsWithInequalItems</td>
<td>Verifies that <code>Object.Equals</code> returns false when the objects are supposed to not be equal.</td>
</tr>
<tr>
<td>VerifyEqualsWithEqualItems</td>
<td>Verifies that <code>IEquatable&lt;T&gt;.Equals</code> returns true when the objects are supposed to be equal.</td>
</tr>
<tr>
<td>VerifyEqualsWithInequalItems</td>
<td>Verifies that <code>IEquatable&lt;T&gt;.Equals</code> returns false when the objects are supposed to not be equal.</td>
</tr>
<tr>
<td>VerifyEqualsWithNull</td>
<td>Verifies that <code>IEquatable&lt;T&gt;.Equals</code> returns false when the object passed to it is <code>null</code>.</td>
</tr>
<tr>
<td>VerifyEqualityOperatorsDefined</td>
<td>Verifies that the == and != operators are defined.</td>
</tr>
<tr>
<td>VerifyOpEqualityWithEqualItems</td>
<td>Verifies that == returns true when the objects are supposed to be equal.</td>
</tr>
<tr>
<td>VerifyOpEqualityWithNotEqualItems</td>
<td>Verifies that == returns false when the objects are supposed to not be equal.</td>
</tr>
<tr>
<td>VerifyOpInequalityWithEqualItems</td>
<td>Verifies that != returns false when the objects are supposed to be equal.</td>
</tr>
<tr>
<td>VerifyOpInequalityWithNotEqualItems</td>
<td>Verifies that != returns true when the objects are supposed to not be qual.</td>
</tr>
<tr>
<td>VerifyOpEqualityWithLeftNull</td>
<td>Verifies that == returns false when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpEqualityWithRightNull</td>
<td>Verifies that == returns false when the left hand side is not null and the right hand side is.</td>
</tr>
<tr>
<td>VerifyOpEqualityWithRightAndLeftNull</td>
<td>Verifies that == returns true when both the left hand side and the right hand side are null.</td>
</tr>
<tr>
<td>VerifyOpInequalityWithLeftNull</td>
<td>Verifies that != returns true when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpInequalityWithRightNull</td>
<td>Verifies that != returns true when the left hand side is not null and the right hand side is.</td>
</tr>
<tr>
<td>VerifyOpInequalityWithRightAndLeftNull</td>
<td>Verifies that != returns false when both the left hand side and the right hand side are null.</td>
</tr>
<tr>
<td>VerifyImmutability</td>
<td>Verifies that changing any mutable properties does not change the equality behavior.</td>
</tr>
</tbody>
</table>
<p>That's 20 tests performed to ensure equality is implemented correctly. There's ways to skip some of those tests (<code>SkipImmutabilityTests</code>,
<code>SkipOperatorTests</code>), but you'd better have a darn good reason for skipping them. Some of those tests are more subtle then you'd think
at first.</p>
<p><code>VerifyObjectEqualsIsOverridden</code> and <code>VerifyGetHashCodeIsOverridden</code> are common mistakes. For that matter, overriding <code>Object.Equals</code>
but not implementing <code>IEquatable&lt;T&gt;</code> is pretty common as well (there's no test for that, but the generic constraints on this verifier
enforce it). Failing to override <code>Object.GetHashCode</code> will likely cause incorrect behavior if the type is used in a <code>Dictionary</code>,
<code>HashSet</code> or in other cases where you might not expect, like with <code>Enumerable.Distinct</code>.</p>
<p>The tests that use <code>null</code> are all easily overlooked, and even easier to get wrong when you implement them.</p>
<p>Often an object with equality semantics should also have comparable semantics (i.e. the type should be collatable/sortable via the
<code>IComparable&lt;T&gt;</code> interface). For that <code>Testify</code> has the <code>ComparableVerifier&lt;T&gt;</code>. This verifier includes all of the same tests
as  <code>EquatableVerifier&lt;T&gt;</code>and in addition it includes the following tests.</p>
<table class="table">
<thead>
<tr>
<th>Test</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VerifyCompareToObjWithNull</td>
<td>Verifies that <code>IComparable.CompareTo</code> returns false when the object passed to is is <code>null</code>.</td>
</tr>
<tr>
<td>VerifyCompareToObjWithLesserItems</td>
<td>Verifies that <code>IComparable.CompareTo</code> returns a value greater than zero when given an object that is supposed to be smaller.</td>
</tr>
<tr>
<td>VerifyCompareToObjWithEqualItems</td>
<td>Verifies that <code>IComparable.CompareTo</code> returns zero when given an object that is supposed to be equal.</td>
</tr>
<tr>
<td>VerifyCompareToObjWithGreaterItems</td>
<td>Verifies that <code>IComparable.CompareTo</code> returns a value less than zero when given an object that is supposed to be larger.</td>
</tr>
<tr>
<td>VerifyCompareToOtherWithLesserItems</td>
<td>Verifies that <code>IComparable&lt;T&gt;.CompareTo</code> returns a value greater than zero when given an object that is supposed to be smaller.</td>
</tr>
<tr>
<td>VerifyCompareToOtherWithItems</td>
<td>Verifies that <code>IComparable&lt;T&gt;.CompareTo</code> returns zero when given an object that is supposed to be equal.</td>
</tr>
<tr>
<td>VerifyCompareToOtherWithGreaterItems</td>
<td>Verifies that <code>IComparable&lt;T&gt;.CompareTo</code> returns a value less than zero when given an object that is supposed to be larger.</td>
</tr>
<tr>
<td>VerifyCompareToOtherWithNull</td>
<td>Verifies that <code>IComparable&lt;T&gt;.CompareTo</code> returns false when the object passed to is is <code>null</code>.</td>
</tr>
<tr>
<td>VerifyComparisonOperatorsDefined</td>
<td>Verifies that &lt;, &lt;=, &gt;, and &gt;= operators are defined.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithLesserItems</td>
<td>Verifies that operator &gt; returns false when the left hand side is less than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithItems</td>
<td>Verifies that operator &gt; returns false when the left hand side is equal to the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithGreaterItems</td>
<td>Verifies that operator &gt; returns true when the left hand side is greater than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithLesserItems</td>
<td>Verifies that operator &gt;= returns false when the left hand side is less than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithItems</td>
<td>Verifies that operator &gt;= returns true when the left hand side is equal to the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithGreaterItems</td>
<td>Verifies that operator &gt;= returns true when the left hand side is greater than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithLesserItems</td>
<td>Verifies that operator &lt; returns true when the left hand side is less than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithItems</td>
<td>Verifies that operator &lt; returns false when the left hand side is equal to the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithGreaterItems</td>
<td>Verifies that operator &lt; returns false when the left hand side is greater than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithLesserItems</td>
<td>Verifies that operator &lt;= returns true when the left hand side is less than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithItems</td>
<td>Verifies that operator &lt;= returns true when the left hand side is equal to the right hand side.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithGreaterItems</td>
<td>Verifies that operator &lt;= returns false when the left hand side is greater than the right hand side.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithLeftNull</td>
<td>Verifies that operator &gt; returns false when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithRightNull</td>
<td>Verifies that operator &gt; return true when the left hand side is not null and the right hand side is.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanWithRightAndLeftNull</td>
<td>Verifies that operator &gt; returns false when both the left hand side and right hand side are null.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithLeftNull</td>
<td>Verifies that operator &gt;= returns false when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithRightNull</td>
<td>Verifies that operator &gt;= returns true when the left hand side is not null and the right hand side is.</td>
</tr>
<tr>
<td>VerifyOpGreaterThanOrEqualWithRightAndLeftNull</td>
<td>Verifies that operator &gt;= returns true when both the left hand side and right hand side are null.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithLeftNull</td>
<td>Verifies that operator &lt; returns true when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithRightNull</td>
<td>Verifies that operator &lt; returns false when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpLessThanWithRightAndLeftNull</td>
<td>Verifies that operator &lt; returns false when both the left hand side and right hand side are null.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithLeftNull</td>
<td>Verifies that operator &lt;= returns true when the left hand side is null and the right hand side is not.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithRightNull</td>
<td>Verifies that operator &lt;= returns false when the left hand side is not null and the right hand side is.</td>
</tr>
<tr>
<td>VerifyOpLessThanOrEqualWithRightAndLeftNull</td>
<td>Verifies that operator &lt;= returns true when both the left hand side and right hand side are null.</td>
</tr>
</tbody>
</table>
<p>So, 32 more tests. I hope you can see how easy it would be to mess this up now. Even more, I hope you see how much of a pain in the neck it would be to
manually implement unit tests for every equatable/comparable type you create without something like the contract verifiers available in <code>Testify</code>.</p>
<p>If I've convinced you that implementing this stuff is hard, what are you to do about it? Well, with C# 7 there's a trick you can use and a
template you can follow to always get this right. Here's an example using the class Point type.</p>
<pre><code class="language-csharp">public class Point : IEquatable&lt;Point&gt;, IComparable&lt;Point&gt;, IComparable
{
    public Point(int x, int y)
    {
        X = x;
        Y = y;
    }

    public int X { get; }

    public int Y { get; }

    public int CompareTo(Point other) =&gt; other == null ? 1 : (X, Y).CompareTo((other.X, other.Y));

    int IComparable.CompareTo(object obj) =&gt; CompareTo(obj as Point);

    public bool Equals(Point other) =&gt; other == null ? false : (X, Y).Equals((other.X, other.Y));

    public override bool Equals(object obj) =&gt; Equals(obj as Point);

    public override int GetHashCode() =&gt; (X, Y).GetHashCode();

    public static bool operator ==(Point left, Point right) =&gt; EqualityComparer&lt;Point&gt;.Default.Equals(left, right);

    public static bool operator !=(Point left, Point right) =&gt; !EqualityComparer&lt;Point&gt;.Default.Equals(left, right);

    public static bool operator &lt;(Point left, Point right) =&gt; Comparer&lt;Point&gt;.Default.Compare(left, right) &lt; 0;

    public static bool operator &lt;=(Point left, Point right) =&gt; Comparer&lt;Point&gt;.Default.Compare(left, right) &lt;= 0;

    public static bool operator &gt;(Point left, Point right) =&gt; Comparer&lt;Point&gt;.Default.Compare(left, right) &gt; 0;

    public static bool operator &gt;=(Point left, Point right) =&gt; Comparer&lt;Point&gt;.Default.Compare(left, right) &gt;= 0;
}
</code></pre>
<p>The main operatons, <code>IEquatable&lt;T&gt;.Equals</code> and <code>IComparable&lt;T&gt;.CompareTo</code> are implemented using tuples,
which implement those interfaces. You have to do a null check here, so there is a little bit of room for messing it up.
The other methods just delegate to these. The operators are then implemented using <code>EqualityComparer&lt;T&gt;</code> and
<code>Comparer&lt;T&gt;</code> which handle the null checks and then delegate to the <code>IEquatable&lt;T&gt;</code> and <code>IComparable&lt;T&gt;</code>
implementations provided. Even <code>GetHashCode</code> gets to delegate to the implementation provided by tuples. Keep in mind
this trick won't work (without some help) with types that aren't equatable/comparable, such as collections.</p>
<p>Here's the test for the above implementation.</p>
<pre><code class="language-csharp">public class PointTests
{
    [Fact]
    public void VerifyComparableContract()
    {
        var verifier = new ComparableVerifier&lt;Point&gt;
        {
            OrderedItemsFactory = () =&gt; new[]
            {
                new Point(0, 0),
                new Point(0, 1),
                new Point(1, 0),
                new Point(1, 1)
            }
        };
        verifier.Verify();
    }
}
</code></pre>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'digitaltapestry'; // required: replace example with your forum shortname
    var disqus_identifier = 'equality';
    var disqus_title = 'Equality';
    var disqus_url = 'http://digitaltapestry.net/posts/equality';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
    <div class="row">
        <div class="col-md-12">
            <ul class="list-inline text-center">
                <li>
                    <a href="https://twitter.com/wekempf">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/wekempf">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
            </ul>
            <p class="copyright text-muted">
                Copyright © 2018 by William E. Kempf. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way.
                <br />
                This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                <br />
                <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                <br />
                <a href="https://github.com/wekempf/wekempf.github.io"><i class="fa fa-github"></i> This Site on GitHub</a>
                <br />
                Hosted on <a href="https://pages.github.com/">GitHub Pages</a>
                <br />
                <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
            </p>
        </div>
    </div>
</div>
                </footer> 

                <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.16/clipboard.min.js"></script>
<script type="text/javascript">
    anchors.options.placement = 'left';
    anchors.add('#content > h1,h2,h3,h4');

    var snippets = document.querySelectorAll("pre > code");
    [].forEach.call(snippets, function(snippet) {
        snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
    });
    var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
    clipboardSnippets.on('success', function(e) {
        e.clearSelection();
        showTooltip(e.trigger, "Copied!");
    });
    clipboardSnippets.on('error', function(e) {
        showTooltip(e.trigger, fallbackMessage(e.action));
    });

    var btns = document.querySelectorAll('.btn-copy');
    for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener('mouseleave', function(e) {
            e.currentTarget.setAttribute('class', 'btn-copy');
            e.currentTarget.removeAttribute('aria-label');
        });
    }

    function showTooltip(elem, msg) {
        elem.setAttribute('class', 'btn-copy tooltipped tooltipped-s');
        elem.setAttribute('aria-label', msg);
    }

    function fallbackMessage(action) {
        var actionMsg = '';
        var actionKey = (action === 'cut' ? 'X' : 'C');
        if (/iPhone|iPad/i.test(navigator.userAgent)) {
            actionMsg = 'No support :(';
        } else if (/Mac/i.test(navigator.userAgent)) {
            actionMsg = 'Press ⌘-' + actionKey + ' to ' + action;
        } else {
            actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
        }
        return actionMsg;
    }
    hljs.initHighlightingOnLoad();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70929529-2', 'auto');
  ga('send', 'pageview');
</script>
                <script>hljs.initHighlightingOnLoad();</script>

        </body>
</html>
